## å‰è¨€

ä½ æ˜¯å¦ç»å¸¸ç¢°åˆ°ä¸šåŠ¡åé¦ˆï¼Œçº¿ä¸Šçš„å°ç¨‹åºæŸä¸ªé¡µé¢æ‰“ä¸å¼€äº†ï¼Œè®¢å•æ²¡æ³•ç»“ç®—äº†ï¼Œä½†æ˜¯ä½ å½“æ—¶æµ‹è¯•çš„æ—¶å€™éƒ½æ˜¯å¥½å¥½çš„ã€‚

ç”±äºçº¿ä¸Šç¯å¢ƒå¤æ‚ï¼Œä¸€äº›é—®é¢˜åªä¼šåœ¨ç‰¹å®šç½‘ç»œç¯å¢ƒæˆ–è€…è®¾å¤‡ä¸Šå‘ç”Ÿï¼Œå¯¹äºè¿™ç±»é—®é¢˜ï¼Œå¼‚å¸¸ä¿¡æ¯çš„æ”¶é›†å°±æ˜¾å¾—æ ¼å¤–é‡è¦äº†ï¼Œæˆ‘ä»¬ä¸ä½†å¸Œæœ›æ”¶é›†**é”™è¯¯çš„å †æ ˆä¿¡æ¯ï¼Œè¿˜éœ€è¦ç”¨æˆ·æ“ä½œæµç¨‹ï¼Œè®¾å¤‡ä¿¡æ¯**ç­‰ï¼Œä»¥ä¾¿å¤ç°é”™è¯¯ã€‚



## ç®€å•æ”¶é›†

å°ç¨‹åºApp()ç”Ÿå‘½å‘¨æœŸé‡Œæä¾›äº†onErrorå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡åœ¨onErroré‡Œæ”¶é›†å¼‚å¸¸ä¿¡æ¯

```
App({
  // ç›‘å¬é”™è¯¯
  onError: function (err) {
    // ä¸ŠæŠ¥é”™è¯¯
    wx.request({
      url: "https://url", // è‡ªè¡Œå®šä¹‰æŠ¥å‘ŠæœåŠ¡å™¨
      method: "POST",
      errMsg: err
    })
  }
})
```



## ç”¨æˆ·æ“ä½œè·¯å¾„æ”¶é›†

ä¸€äº›è¾ƒéšè”½çš„é”™è¯¯å¦‚æœåªæœ‰é”™è¯¯æ ˆä¿¡æ¯ï¼Œæ’æŸ¥èµ·æ¥ä¼šæ¯”è¾ƒéš¾ï¼Œå¦‚æœæœ‰ç”¨æˆ·æ“ä½œçš„è·¯å¾„ï¼Œåœ¨æ’æŸ¥æ—¶å°±æ–¹ä¾¿å¤šäº†ã€‚

**æ–¹æ³•ä¸€ï¼šæš´åŠ›æ‰“ç‚¹æ–¹æ³•æ”¶é›†**

ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥

ç¼ºç‚¹ï¼šæ±¡æŸ“ä¸šåŠ¡ä»£ç ï¼Œé€ æˆè¾ƒå¤šåƒåœ¾ä»£ç 

**æ–¹æ³•äºŒï¼šå‡½æ•°åŠ«æŒï¼ˆæ¨èä½¿ç”¨ï¼‰**

éœ€è¦åœ¨Appå‡½æ•°ä¸­çš„onLaunchã€onShowã€onHideç”Ÿå‘½å‘¨æœŸæ’å…¥ç›‘æ§ä»£ç ï¼Œæˆ‘ä»¬é€šè¿‡é‡å†™Appç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¥å®ç°ã€‚

```
App = function(app) {
    ["onLaunch", "onShow", "onHide"].forEach(methodName => {
        app[methodName] = function(options) {
          // æ„é€ è®¿é—®æ—¥å¿—å¯¹è±¡
          var breadcrumb = {
            type: "function",
            time: utils.now(),
            belong: "App", // æ¥æº
            method: methodName,
            path: options && options.path, // é¡µé¢è·¯å¾„
            query: options && options.query, // é¡µé¢å‚æ•°
            scene: options && options.scene // åœºæ™¯ç¼–å·
          };
          self.pushToBreadcrumb(breadcrumb); // æŠŠæ‰§è¡Œå¯¹è±¡åŠ å…¥åˆ°é¢åŒ…å±‘ä¸­
    })
}
```

ä½†æ˜¯è¿™æ ·å†™ï¼Œä¼šæŠŠç”¨æˆ·è‡ªå®šä¹‰çš„å†…å®¹ç»™è¦†ç›–æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æŠŠç”¨æˆ·å®šä¹‰çš„å‡½æ•°å’Œç›‘æ§ä»£ç åˆå¹¶ã€‚

````
 var originApp = App // ä¿å­˜åŸå¯¹è±¡
 App = function(app) {
 	// .... æ­¤å¤„çœç•¥ç›‘æ§ä»£ç 
 	// .... æ­¤å¤„çœç•¥ç›‘æ§ä»£ç 
 	originApp(app) // æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„æ–¹æ³•
 }
````

**è®°å½•ç»“æœ**

å¯ä»¥ä»ä¸‹é¢çš„jsonçœ‹å‡ºï¼Œç”¨æˆ·åˆ°äº†detailé¡µé¢ï¼Œæ‰§è¡Œäº†onLoad => getDetail => onReady => buy å½“æ‰§è¡Œbuyæ–¹æ³•çš„æ—¶å€™æŠ¥é”™ã€‚

```json
{"method":"onLoad","route":"pages/film/detail","options":{"id":"4206"}},
{"method":"getDetail","route":"pages/film/detail","options":{"id":"4206"}},	{"method":"onReady","route":"pages/film/detail","options":{"id":"4206"}},{"method":"buy","route":"pages/film/detail","options":{"id":"4206"}}]
```



## ä¸ŠæŠ¥ç­–ç•¥

è€ƒè™‘åˆ°åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæ—¥å¿—é‡æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬é‡‡å–**æŠ½æ ·ï¼Œåˆå¹¶ï¼Œè¿‡æ»¤**ä¸‰ä¸ªæ–¹æ³•å‡å°‘æ—¥å¿—çš„è¾“å‡ºï¼Œä»£ç å®ç°å¯ä»¥å‚è€ƒlib/report.js



## ä»£ç ç»„ç»‡

é¡¹ç›®ä½¿ç”¨rollupä½œä¸ºæ„å»ºå·¥ä½œï¼Œå®ç°ES6è½¬ES5ï¼Œæ¨¡å—åŠ è½½åŠŸèƒ½ã€‚

é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š

```
src/
	lib/
		config.js  // é…ç½®æ–‡ä»¶
		core.js	 // åŠ«æŒå°ç¨‹åºæ ¸å¿ƒä»£ç 
		events.js  // ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶
		report.js // ä¸ŠæŠ¥ç±»
		utils.js // å·¥å…·ç±»
	index.js // ä¸»å…¥å£
```



## ğŸŒŸå–œæ¬¢çš„ç‚¹ä¸ªstarï¼š

https://github.com/zhengguorong/xbossdebug-wechat



## å‚è€ƒèµ„æ–™

[fundebug](https://www.fundebug.com/) 

[å‰ç«¯å¼‚å¸¸ç›‘æ§ç³»ç»Ÿè½åœ°](https://zhuanlan.zhihu.com/p/26085642)